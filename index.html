<html>
	<title>CS 3300 Project 1 (rw466, acac927, tzs2)</title>
	<body style="background-color:azure;">
	<script src="https://d3js.org/d3.v4.min.js"></script>
	<h1 style="font-family:Garamond;text-align:center">Religious Attendance vs. Weekly Hours Worked vs. Median Income</h1>

	<svg id="plot" align="center"> </svg>
	
	<script>
		
		var fullData

		d3.json("master-hours-spending-religion.json", function(error, data) {

			if(error){
				console.log(error)
			}

			fullData = data

			var height = 800
			var width = 800
			
			

			var margins = {
				"left": 50,
				"right": 30,
				"top": 30,
				"bottom": 30,
			}

			var domainWidth = width - margins.left - margins.right
			var domainHeight = height - margins.top - margins.bottom

			var svg = d3.select("#plot")
			.attr("height", height)
			.attr("width", width)
			.append("g")
			.attr("transform", "translate(" + margins.left + "," + margins.top + ")")
			
			svg.append("rect")
			.attr("height", domainHeight)
			.attr("width", domainWidth)
			.attr("stroke", "white")
			.attr("stroke-width", 5)
			.attr("fill", "papayawhip")
			

			var xScale = d3.scaleLinear().domain(d3.extent(data, function (d) {
				return d.religiousattendance
			})).range([20, domainWidth-20])

			var yScale = d3.scaleLinear().domain(d3.extent(data, function (d) {
				return d.workhours
			})).range([domainHeight-20, 20])

			var sizeScale = d3.scaleLinear().domain(d3.extent(data, function (d) {
				return d.medianincome
			})).range([2,20])

			var xAxis = d3.axisBottom(xScale).ticks(10)
			svg.append("text")             
			.attr("transform", "translate(" + (width*3/4) + " ," + 
                           (height/2) + ")")
			.style("text-anchor", "middle")
			.attr("font-family", "garamond")
			.attr("font-weight", 700)
			.text("Religious Attendance")
			
			var yAxis = d3.axisLeft(yScale).ticks(10)
			svg.append("text")
			.style("text-anchor", "middle")
			.style("dominant-baseline", "central")             
			.attr("transform", "translate("+
			(width*2/5) + " ," + (height/6) + ")rotate (270)")
			.attr("font-family", "garamond")
			.attr("font-weight", 700)
			.text("Weekly Hours Worked")

			svg.append("g")
			.attr("transform", "translate(0," + domainWidth/2 + ")" )
			.call(xAxis)

			svg.append("g")
			.attr("transform", "translate(" + domainHeight/2 + ",0)")
			.call(yAxis)

			data.forEach(function (state) {
				svg.append("circle")
				.attr("r", sizeScale(state.medianincome))
				//.attr("r", 5)
				.attr("cx", xScale(state.religiousattendance))
				.attr("cy", yScale(state.workhours))
				.attr("fill", "dodgerblue")
				

				svg.append("text")
				.attr("font-family", "helvetica")
				.attr("x", xScale(state.religiousattendance))
				.attr("y", yScale(state.workhours))
				.attr("dy", (-1*sizeScale(state.medianincome)))
				//.attr("dy", -5)
				.text(state.abbreviation)
			})

			

		})
	</script>
</html>
